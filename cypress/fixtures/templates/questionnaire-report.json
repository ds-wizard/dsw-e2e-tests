{
    "id" : "dsw:questionnaire-report:1.1.0",
    "name" : "Questionnaire Report",
    "organizationId" : "dsw",
    "templateId" : "questionnaire-report",
    "version" : "1.1.0",
    "metamodelVersion" : 2,
    "description" : "Exported questions and answers from a questionnaire",
    "readme" : "# Questionnaire Report\n\nThis generic *default* template for [Data Stewardship Wizard](https://ds-wizard.org) (DSW) directly transforms answers from a questionnaire into a document while maintaining the structure. It is not tied to any knowledge model and is included by default in every DSW instance.\n\n## Changelog\n\n### 1.1.0\n- Adjusted to template metamodel version 2\n\n### 1.0.0\n\n- Initial version previously distributed as files directly in DSW\n",
    "license" : "Apache-2.0",
    "allowedPackages" : [ 
        {
            "orgId" : null,
            "kmId" : null,
            "minVersion" : null,
            "maxVersion" : null
        }
    ],
    "recommendedPackageId" : null,
    "formats" : [ 
        {
            "uuid" : "d3e98eb6-344d-481f-8e37-6a67b6cd1ad2",
            "name" : "JSON Data",
            "shortName" : "json",
            "icon" : "far fa-file",
            "color" : "#f15a24",
            "steps" : [ 
                {
                    "name" : "json",
                    "options" : {}
                }
            ]
        }, 
        {
            "uuid" : "a9293d08-59a4-4e6b-ae62-7a6a570b031c",
            "name" : "HTML Document",
            "shortName" : "html",
            "icon" : "far fa-file-code",
            "color" : "#f15a24",
            "steps" : [ 
                {
                    "name" : "jinja",
                    "options" : {
                        "content-type" : "text/html",
                        "extension" : "html",
                        "template" : "default.html.j2"
                    }
                }
            ]
        }, 
        {
            "uuid" : "68c26e34-5e77-4e15-9bf7-06ff92582257",
            "name" : "PDF Document",
            "shortName" : "pdf",
            "icon" : "far fa-file-pdf",
            "color" : "#f15a24",
            "steps" : [ 
                {
                    "name" : "jinja",
                    "options" : {
                        "content-type" : "text/html",
                        "extension" : "html",
                        "template" : "default.html.j2"
                    }
                }, 
                {
                    "name" : "wkhtmltopdf",
                    "options" : {}
                }
            ]
        }, 
        {
            "uuid" : "dbc94579-40d7-42c3-975c-71e30d07778b",
            "name" : "LaTeX Document",
            "shortName" : "latex",
            "icon" : "far fa-file-alt",
            "color" : "#f15a24",
            "steps" : [ 
                {
                    "name" : "jinja",
                    "options" : {
                        "content-type" : "text/html",
                        "extension" : "html",
                        "template" : "default.html.j2"
                    }
                }, 
                {
                    "name" : "pandoc",
                    "options" : {
                        "from" : "html",
                        "to" : "latex"
                    }
                }
            ]
        }, 
        {
            "uuid" : "f4bd941a-dfbe-4226-a1fc-200fb5269311",
            "name" : "MS Word Document",
            "shortName" : "docx",
            "icon" : "far fa-file-word",
            "color" : "#f15a24",
            "steps" : [ 
                {
                    "name" : "jinja",
                    "options" : {
                        "content-type" : "text/html",
                        "extension" : "html",
                        "template" : "default.html.j2"
                    }
                }, 
                {
                    "name" : "pandoc",
                    "options" : {
                        "from" : "html",
                        "to" : "docx"
                    }
                }
            ]
        }, 
        {
            "uuid" : "15e53172-bbae-4a0c-a4d9-8f3ddf60e7b6",
            "name" : "OpenDocument Text",
            "shortName" : "odt",
            "icon" : "far fa-file-alt",
            "color" : "#f15a24",
            "steps" : [ 
                {
                    "name" : "jinja",
                    "options" : {
                        "content-type" : "text/html",
                        "extension" : "html",
                        "template" : "default.html.j2"
                    }
                }, 
                {
                    "name" : "pandoc",
                    "options" : {
                        "from" : "html",
                        "to" : "odt"
                    }
                }
            ]
        }, 
        {
            "uuid" : "f0533e48-f4c5-4af2-b2c1-5a47d4a247c0",
            "name" : "Markdown Document",
            "shortName" : "md",
            "icon" : "far fa-file-alt",
            "color" : "#f15a24",
            "steps" : [ 
                {
                    "name" : "jinja",
                    "options" : {
                        "content-type" : "text/html",
                        "extension" : "html",
                        "template" : "default.html.j2"
                    }
                }, 
                {
                    "name" : "pandoc",
                    "options" : {
                        "from" : "html",
                        "to" : "markdown"
                    }
                }
            ]
        }
    ],
    "files" : [ 
        {
            "uuid" : "7f83f7ce-4096-49a5-88d1-bd509bf72a9b",
            "fileName" : "default.html.j2",
            "content" : "<!DOCTYPE HTML>\n{# ------------------------------------------------------------------------------------ #}\n{#  VARIABLES                                                                           #}\n{# ------------------------------------------------------------------------------------ #}\n{%- set km = ctx.knowledgeModel -%}\n{%- set repliesMap = ctx.questionnaireReplies -%}\n{%- set report = ctx.report -%}\n{%- set metricDefinitions = ctx.metrics -%}\n{%- set levelDefinitions = ctx.levels -%}\n{# ------------------------------------------------------------------------------------ #}\n{#  TAGS, REFERNCES, and EXPERTS MACROS                                                 #}\n{# ------------------------------------------------------------------------------------ #}\n{%- macro renderTags(tagUuids) -%}\n  {% if tagUuids|length > 0 %}\n    <div class=\"tags\">\n      <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><svg xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\" xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\" xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\" viewBox=\"0 -256 1950 1950\" id=\"svg4303\" version=\"1.1\" inkscape:version=\"0.48.3.1 r9886\" width=\"100%\" height=\"100%\" sodipodi:docname=\"tags_font_awesome.svg\"><defs id=\"defs4311\" /><sodipodi:namedview pagecolor=\"#ffffff\" bordercolor=\"#666666\" borderopacity=\"1\" objecttolerance=\"10\" gridtolerance=\"10\" guidetolerance=\"10\" inkscape:pageopacity=\"0\" inkscape:pageshadow=\"2\" inkscape:window-width=\"640\" inkscape:window-height=\"480\" id=\"namedview4309\" showgrid=\"false\" inkscape:zoom=\"0.52187927\" inkscape:cx=\"9.5432149\" inkscape:cy=\"1022.7118\" inkscape:window-x=\"0\" inkscape:window-y=\"25\" inkscape:window-maximized=\"0\" inkscape:current-layer=\"svg4303\" /><g transform=\"matrix(1,0,0,-1,21.678786,1392.819)\" id=\"g4305\"><path d=\"m 448,1088 q 0,53 -37.5,90.5 Q 373,1216 320,1216 267,1216 229.5,1178.5 192,1141 192,1088 192,1035 229.5,997.5 267,960 320,960 q 53,0 90.5,37.5 Q 448,1035 448,1088 z M 1515,512 q 0,-53 -37,-90 L 987,-70 q -39,-37 -91,-37 -53,0 -90,37 L 91,646 Q 53,683 26.5,747 0,811 0,864 v 416 q 0,52 38,90 38,38 90,38 h 416 q 53,0 117,-26.5 64,-26.5 102,-64.5 l 715,-714 q 37,-39 37,-91 z m 384,0 q 0,-53 -37,-90 L 1371,-70 q -39,-37 -91,-37 -36,0 -59,14 -23,14 -53,45 l 470,470 q 37,37 37,90 0,52 -37,91 l -715,714 q -38,38 -102,64.5 -64,26.5 -117,26.5 h 224 q 53,0 117,-26.5 64,-26.5 102,-64.5 l 715,-714 q 37,-39 37,-91 z\" id=\"path4307\" inkscape:connector-curvature=\"0\" style=\"fill:currentColor\" /></g></svg>\n      <b>Tags:</b>\n      {% for tagUuid in tagUuids %}\n        {% set tag = km.entities.tags[tagUuid] %}\n        <i class=\"tag\">{{tag.name}}</i>\n      {% endfor %}\n    </div>\n  {% endif %}\n{%- endmacro -%}\n{%- macro renderResourcePageReferences(referenceUuids) -%}\n  {% set resourcePageReferences = [] %}\n  {% for uuid in referenceUuids %}\n    {% if km.entities.references[uuid].referenceType == \"ResourcePageReference\" %}\n      {% do resourcePageReferences.append(km.entities.references[uuid]) %}\n    {% endif %}\n  {% endfor %}\n  {% if resourcePageReferences|length > 0 %}\n    <div class=\"references references-resourcepage\">\n      <svg aria-hidden=\"true\" data-prefix=\"fas\" data-icon=\"book\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" class=\"svg-inline--fa fa-book fa-w-14 fa-2x\"><path fill=\"currentColor\" d=\"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z\" class=\"\"></path></svg>\n      <span><b>Data Stewardship for Open Science:</b></span>\n      {% for reference in resourcePageReferences %}\n        {% if reference.referenceType == \"ResourcePageReference\" %}\n          <a id=\"{{reference.uuid}}\" class=\"reference resourcepage-link\" href=\"{{ (\"https://demo.ds-wizard.org/book-references/\" ~ reference.shortUuid) }}\" target=\"_blank\"><i>{{reference.shortUuid}}</i></a>\n        {% endif %}\n      {% endfor %}\n    </div>\n  {% endif %}\n{%- endmacro -%}\n{%- macro renderURLReferences(referenceUuids) -%}\n  {% set urlReferences = [] %}\n  {% for uuid in referenceUuids %}\n    {% if km.entities.references[uuid].referenceType == \"URLReference\" %}\n      {% do urlReferences.append(km.entities.references[uuid]) %}\n    {% endif %}\n  {% endfor %}\n  {% if urlReferences|length > 0 %}\n    <div class=\"references references-url\" >\n      <svg aria-hidden=\"true\" data-prefix=\"far\" data-icon=\"external-link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\" class=\"svg-inline--fa fa-external-link fa-w-18 fa-2x\"><path fill=\"currentColor\" d=\"M576 14.4l-.174 163.2c0 7.953-6.447 14.4-14.4 14.4H528.12c-8.067 0-14.56-6.626-14.397-14.691l2.717-73.627-2.062-2.062-278.863 278.865c-4.686 4.686-12.284 4.686-16.971 0l-23.029-23.029c-4.686-4.686-4.686-12.284 0-16.971L474.379 61.621l-2.062-2.062-73.626 2.717C390.626 62.44 384 55.946 384 47.879V14.574c0-7.953 6.447-14.4 14.4-14.4L561.6 0c7.953 0 14.4 6.447 14.4 14.4zM427.515 233.74l-24 24a12.002 12.002 0 0 0-3.515 8.485V458a6 6 0 0 1-6 6H54a6 6 0 0 1-6-6V118a6 6 0 0 1 6-6h301.976c10.691 0 16.045-12.926 8.485-20.485l-24-24A12.002 12.002 0 0 0 331.976 64H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V242.225c0-10.691-12.926-16.045-20.485-8.485z\" class=\"\"></path></svg>\n      <b>External Links:</b>\n      {% for reference in urlReferences %}\n        {% if reference.referenceType == \"URLReference\" %}\n          <a id=\"{{reference.uuid}}\" class=\"reference url-link\" href=\"{{reference.url}}\" target=\"_blank\"><i>{{reference.label}}</i></a>\n        {% endif %}\n      {% endfor %}\n    </div>\n  {% endif %}\n{%- endmacro -%}\n{%- macro renderExperts(expertUuids) -%}\n  {% if expertUuids|length > 0 %}\n    <div class=\"experts\">\n      <svg aria-hidden=\"true\" data-prefix=\"far\" data-icon=\"address-book\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" class=\"svg-inline--fa fa-address-book fa-w-14 fa-2x\"><path fill=\"currentColor\" d=\"M436 160c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h320c26.5 0 48-21.5 48-48v-48h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20zm-68 304H48V48h320v416zM208 256c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm-89.6 128h179.2c12.4 0 22.4-8.6 22.4-19.2v-19.2c0-31.8-30.1-57.6-67.2-57.6-10.8 0-18.7 8-44.8 8-26.9 0-33.4-8-44.8-8-37.1 0-67.2 25.8-67.2 57.6v19.2c0 10.6 10 19.2 22.4 19.2z\" class=\"\"></path></svg>\n      <b>Experts:</b>\n      {% for expertUuid in expertUuids %}\n        {% set expert = km.entities.experts[expertUuid] %}\n        <i class=\"expert\">{{expert.name}} (<a href=\"mailto:{{expert.email}}\">{{expert.email}}</a>)</i>\n      {% endfor %}\n    </div>\n  {% endif %}\n{%- endmacro -%}\n{# ------------------------------------------------------------------------------------ #}\n{#  ANSWERS MACROS                                                                      #}\n{# ------------------------------------------------------------------------------------ #}\n{%- macro renderAnswerValue(question, reply, path, humanIdentifier) -%}\n  <div class=\"answer-block answer-simple\" id=\"{{path}}\" data-path=\"{{reply.path}}\" data-type=\"answer\">\n    <p class=\"answer\">\n      <svg aria-hidden=\"true\" data-prefix=\"fas\" data-icon=\"check\" class=\"svg-inline--fa fa-check fa-w-16\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"currentColor\" d=\"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z\"></path></svg>\n      {% if reply.type == \"StringReply\" %}\n        <span>{{reply.value}}</span>\n      {% else %}\n        <span>{{reply.value.value}}</span>\n        {% if reply.value.type == \"IntegrationValue\" and reply.value.id %}\n          {# Integration #}\n          {% set integration = km.entities.integrations[question.integrationUuid] %}\n          <div class=\"integration-link\">\n            {% if integration.logo %}<img src=\"{{ integration.logo }}\" alt=\"{{ integration.name }}\">{% endif %}\n            <a href=\"{{ integration.itemUrl|replace('${id}', reply.value.id) }}\">\n              {{ integration.itemUrl|replace(\"${id}\", reply.value.id) }}\n            </a>\n          </div>\n        {% endif %}\n      {% endif %}\n    </p>\n  </div>\n{%- endmacro -%}\n{%- macro renderAnswerOption(question, reply, path, humanIdentifier) -%}\n  {% set hi = question.answerUuids.index(reply.value) %}\n  {% set answer = km.entities.answers[reply.value] %}\n  {% set path = path ~ \".\" ~ answer.uuid %}\n  {% set humanIdentifier = humanIdentifier ~ \".\" ~ hi|of_alphabet %}\n  <div class=\"answer-block answer-option\" id=\"{{path}}\" data-path=\"{{reply.path}}\" data-uuid=\"{{answer.uuid}}\" data-type=\"answer\">\n    <p class=\"answer\">\n      <svg aria-hidden=\"true\" data-prefix=\"fas\" data-icon=\"check\" class=\"svg-inline--fa fa-check fa-w-16\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"currentColor\" d=\"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z\"></path></svg>\n      <span>{{ hi|of_alphabet }}. {{answer.label}}</span>\n    </p>\n    {% if answer.advice %}\n      <p class=\"text-muted\"><i>{{answer.advice|markdown}}</i></p>\n    {% endif %}\n    <div class=\"followups\">\n      {% set hiPrefix = humanIdentifier ~ \".\" %}\n      {% for questionUuid in answer.followUpUuids %}\n        {% set x = loop.index %}\n        {{ renderQuestion(km.entities.questions[questionUuid], path, hiPrefix ~ x) }}\n      {% endfor %}\n    </div>\n  </div>\n{%- endmacro -%}\n{%- macro renderAnswerList(question, reply, path, humanIdentifier) -%}\n  <div class=\"answer-block answer-items\" id=\"{{path}}\" data-path=\"{{reply.path}}\" data-type=\"answer\">\n    <h4>Answers</h4>\n    {% set itemPathPrefix = path ~ \".\" %}\n    {% set hiPrefix = humanIdentifier ~ \".\" %}\n    {% for i in reply.value %}\n      {% set itemPath = itemPathPrefix ~ i %}\n      {% set itemHumanIdenfifier = hiPrefix ~ loop.index|of_alphabet %}\n      <div class=\"answer-item\" id=\"{{itemPath}}\">\n        <div class=\"followups\">\n          {% for questionUuid in question.itemTemplateQuestionUuids %}\n            {% set x = loop.index %}\n            {{ renderQuestion(km.entities.questions[questionUuid], itemPath, itemHumanIdenfifier ~ \".\" ~ x) }}\n          {% else %}\n            No follow up questions\n          {% endfor %}\n        </div>\n      </div>\n    {% else %}\n      No answer items\n    {% endfor %}\n  </div>\n{%- endmacro -%}\n{# ------------------------------------------------------------------------------------ #}\n{#  QUESTION MACROS                                                                     #}\n{# ------------------------------------------------------------------------------------ #}\n{%- macro questionClasses(question) -%}\n  \"question {{ \"required\" if (question.requiredLevel and question.requiredLevel <= ctx.level) else \"optional\"}} {{  (\"phase-\" ~ question.requiredLevel) if question.requiredLevel else \"phase-none\" }}\"\n{%- endmacro -%}\n{%- macro renderQuestionExtras(question) -%}\n  <div class=\"extra-data\">\n    {# Question - Tags #}\n    {{ renderTags(question.tagUuids) }}\n    {# Question - References - Resource Page References #}\n    {{ renderResourcePageReferences(question.referenceUuids) }}\n    {# Question - References - URL References #}\n    {{ renderURLReferences(question.referenceUuids) }}\n    {# Question - Experts #}\n    {{ renderExperts(question.expertUuids) }}\n  </div>\n{%- endmacro -%}\n{%- macro renderQuestionReply(question, path, humanIdentifier) -%}\n  {# Question - Answers #}\n  {% set reply = repliesMap[path] %}\n  {% if reply %}\n    {% if question.questionType == \"ValueQuestion\" and reply.type == \"StringReply\" %}\n      {{ renderAnswerValue(question, reply, path, humanIdentifier) }}\n    {% elif question.questionType == \"OptionsQuestion\" and reply.type == \"AnswerReply\" %}\n      {{ renderAnswerOption(question, reply, path, humanIdentifier) }}\n    {% elif question.questionType == \"ListQuestion\" and reply.type == \"ItemListReply\" %}\n      {{ renderAnswerList(question, reply, path, humanIdentifier) }}\n    {% elif question.questionType == \"IntegrationQuestion\" and reply.type == \"IntegrationReply\" %}\n      {{ renderAnswerValue(question, reply, path, humanIdentifier) }}\n    {% endif %}\n  {% else %}\n    <div class=\"answer-block not-answered\">\n      <p class=\"no-answer\">\n        <svg aria-hidden=\"true\" data-prefix=\"fas\" data-icon=\"times\" class=\"svg-inline--fa fa-times fa-w-11\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 352 512\"><path fill=\"currentColor\" d=\"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z\"></path></svg>\n        <span>This question has not been answered yet!</span>\n      </p>\n    </div>\n  {% endif %}\n{%- endmacro -%}\n{%- macro renderQuestion(question, path, humanIdentifier) -%}\n  {% set path = path ~ \".\" ~ question.uuid %}\n  <div class={{questionClasses(question)}} id=\"{{path}}\" data-uuid=\"{{question.uuid}}\" data-type=\"question\">\n    <h4 class=\"title\">\n      <strong class=\"human-identifier\">{{humanIdentifier}}</strong>\n      {{question.title}}\n    </h4>\n    <p class=\"text text-light\">{{question.text|markdown}}</p>\n\n    {{ renderQuestionExtras(question) }}\n\n    {{ renderQuestionReply(question, path, humanIdentifier) }}\n  </div>\n{%- endmacro -%}\n{# ------------------------------------------------------------------------------------ #}\n{#  CHAPTER MACROS                                                                      #}\n{# ------------------------------------------------------------------------------------ #}\n\n{%- macro renderChapterReport(chapter) -%}\n  <section class=\"report\">\n    <h3 class=\"title\">Report</h3>\n\n    <h4>Indications</h4>\n    <div class=\"indications\">\n      <table>\n        <tbody>\n          {% for chapterReport in report.chapterReports %}\n            {% if chapterReport.chapterUuid == chapter.uuid %}\n              {% for indication in chapterReport.indications %}\n                <tr>\n                  <td>Answered {% if indication.indicationType == \"LevelsAnsweredIndication\" %}(current phase){% endif %}</td>\n                  <td>{{indication.answeredQuestions}} / {{indication.answeredQuestions + indication.unansweredQuestions}} </td>\n                </tr>\n              {% endfor %}\n            {% endif %}\n          {% endfor %}\n        </tbody>\n      </table>\n    </div>\n\n    <h4>Metrics</h4>\n    <div class=\"metrics\">\n      {% set chapterReports = report.chapterReports|selectattr(\"chapterUuid\", \"equalto\", chapter.uuid)|selectattr(\"metrics\", \"not_empty\")|list %}\n      {% if chapterReports|length > 0 %}\n        <table>\n          <thead><tr><th>Metric</th><th>Score</th></tr></thead>\n          <tbody>\n            {% for chapterReport in chapterReports %}\n              {% if chapterReport.chapterUuid == chapter.uuid %}\n                {% for metric in chapterReport.metrics %}\n                  <tr>\n                    <td>\n                      {% for metricDefinition in metricDefinitions %}\n                        {% if metric.metricUuid == metricDefinition.uuid %}\n                          {{metricDefinition.title}}\n                        {% endif %}\n                      {% endfor %}\n                    </td>\n                    <td>{{ metric.measure|round(2) }}</td>\n                  </tr>\n                {% endfor %}\n              {% endif %}\n            {% else %}\n              No indications\n            {% endfor %}\n          </tbody>\n        </table>\n      {% else %}\n        <p class=\"text-light\">No metrics for this chapter.</p>\n      {% endif %}\n    </div>\n  </section>\n{%- endmacro -%}\n{%- macro renderChapter(chapter, humanIdentifier) -%}\n      <section class=\"chapter\" id=\"{{chapter.uuid}}\" data-uuid=\"{{chapter.uuid}}\" data-type=\"chapter\">\n        <h2 class=\"title\">{{humanIdentifier|roman}}. {{chapter.title}}</h2>\n        <p class=\"text-light\">{{chapter.text|markdown}}</p>\n\n        {{ renderChapterReport(chapter) }}\n\n        <section class=\"questions\">\n          <h3 class=\"title\">Questions</h3>\n          {% for questionUuid in chapter.questionUuids %}\n            {{ renderQuestion(km.entities.questions[questionUuid], chapter.uuid, loop.index) }}\n          {% else %}\n            <p class=\"text-light\">No questions</p>\n          {% endfor %}\n        </section>\n      </section>\n{%- endmacro -%}\n{# ------------------------------------------------------------------------------------ #}\n{#  HTML LAYOUT                                                                         #}\n{# ------------------------------------------------------------------------------------ #}\n{%- macro renderHeader() -%}\n  <header>\n    <h1>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 204 153\"><path d=\"M151,113.37,137.24,89.08l-24.67-7.25,19-2.76L113.81,47.7,95.94,37.89l17.18,2.85,37.53,5.7L94.59,1.33c-2.76-2.67-6.88-1.47-8.32,2.44l-14.4,55,20,3.36L69.71,67,57.32,114.31l36.85,5.2-41.56,6.63L.66,152.1s34.15-1.54,45.76-3.16c44-6.14,76.34-6.76,120.36-13.54,7.71-1.19,37.56-20.62,37.56-20.62Z\" style=\"fill:#333\"/></svg>\n      <div class=\"headline\">\n        <span class=\"questionnaire-name\">{{ctx.questionnaireName}}</span><br>\n        <span class=\"km-name\">{{km.name}}</span>\n      </div>\n    </h1>\n    <table class=\"dmp-data\">\n      <tr>\n        <th>Organization</th>\n        <td>{{ctx.organization.name}}</td>\n      </tr>\n      {% if ctx.createdBy %}\n      <tr>\n        <th>Created by</th>\n        <td>{{ctx.createdBy.firstName}} {{ctx.createdBy.lastName}} (<a href=\"mailto:{{ctx.createdBy.email}}\">{{ctx.createdBy.email}}</a>)</td>\n      </tr>\n      {% endif %}\n      <tr>\n        <th>Based on</th>\n        <td>{{ctx.package.name}}, {{ctx.package.version}} (<span class=\"package-id\"><span class=\"organization-id\">{{ctx.package.organizationId}}</span>:<span class=\"km-id\">{{ctx.package.kmId}}</span>:<span class=\"version\">{{ctx.package.version}}</span></span>)</td>\n      </tr>\n      {% if ctx.config.levelsEnabled %}\n      <tr>\n        <th>Project Phase</th>\n        <td>\n          {% for levelDefinition in levelDefinitions %}\n            {% if levelDefinition.level == ctx.level %}\n              {{levelDefinition.title}}\n            {% endif %}\n          {% endfor %}\n        </td>\n      </tr>\n      {% endif %}\n      <tr>\n        <th>Created at</th>\n        <td>{{ ctx.createdAt|datetime_format(\"%d %b %Y\") }}</td>\n      </tr>\n    </table>\n  </header>\n{%- endmacro -%}\n{%- macro renderFooter() -%}\n  <footer>\n    Data Management Plan generated by Data Stewardship Wizard &lt;<a href=\"https://ds-wizard.org\" target=\"_blank\">https://ds-wizard.org</a>&gt;\n  </footer>\n{%- endmacro -%}\n{%- macro renderContent() -%}\n  <main>\n    {% for chapterUuid in km.chapterUuids %}\n      {{ renderChapter(km.entities.chapters[chapterUuid], loop.index) }}\n    {% else %}\n      <p class=\"text-light\">No chapters</p>\n    {% endfor %}\n  </main>\n{%- endmacro -%}\n{# ------------------------------------------------------------------------------------ #}\n{#  HTML TEMPLATE                                                                       #}\n{# ------------------------------------------------------------------------------------ #}\n<html>\n  <head>\n    <title>Data Management Plan</title>\n    <meta charset=\"utf-8\">\n    <style>{% include \"default.css\" %}</style>\n  </head>\n  <body>\n    <article class=\"dmp\">\n      {{ renderHeader() }}\n      {{ renderContent() }}\n      {{ renderFooter() }}\n    </article>\n  </body>\n</html>\n"
        }, 
        {
            "uuid" : "ae41aa74-9605-4dfb-b1f9-b6064adc1dbc",
            "fileName" : "default.css",
            "content" : "\n/**************************/\n/* GENERAL STYLE          */\n/**************************/\n\nbody {\n  max-width: 1000px;\n  margin: auto;\n  font-family: sans-serif;\n  font-size: .95rem;\n}\n\nh1, h2, h3, h4, h5, h6 {\n  color: #333;\n}\n\nh3, h4 {\n  margin-top: 1.33em;\n  margin-bottom: 0.5em;\n}\n\na {\n  color: #868e96;\n}\n\n.text-light {\n  color: #868e96!important;\n}\n\n.text-muted {\n  color: #AEA79F!important;\n}\n\n/**************************/\n\nheader {\n  padding-bottom: 1rem;\n  border-bottom: solid 3px #aaaaaa;\n}\n\nheader > h1 {\n  font-size: 200%;\n  margin: 0.5rem 0 ;\n  line-height: 3rem;\n  vertical-align: middle;\n}\n\nheader > h1 > div.headline {\n  float: left;\n  margin-left: 1rem;\n}\n\nheader > h1 > div.headline > span.km-name {\n  color: #868e96;\n  font-size: 75%;\n  font-style: italic;\n}\n\nheader > h1 > svg {\n  float: left;\n  height: 40px;\n  width: 50px;\n  vertical-align: middle;\n  margin: 0.5rem;\n}\n\nheader h1::after,\nheader::after {\n  content: \"\";\n  display: block;\n  clear: both;\n}\n\n/**************************/\n\ndl {\n  color: #868e96;\n}\n\ndl dt {\n  display: inline-block;\n  width: 15%;\n  padding: 0.2rem 0;\n  float: left;\n}\n\ndl dt::after {\n  content: \":\";\n}\n\ndl dd {\n  display: inline-block;\n  width: 85%;\n  margin: 0;\n  padding: 0.2rem 0;\n  float: left;\n  font-style: italic;\n}\n\ndl dt > span.package-id {\n  font-family: monospace;\n  font-style: normal;\n}\n\n/**************************/\n\ntable {\n  border-spacing: 0;\n}\n\ntable th {\n  padding: 0.5rem;\n  border-right: 1px solid #E1E1E1;\n  border-bottom: 1px solid #E1E1E1;\n}\n\ntable th:first-child {\n  border-left: 1px solid #E1E1E1;\n}\n\ntable tr:first-child td,\ntable tr:first-child th {\n  border-top: 1px solid #E1E1E1;\n}\n\ntable td {\n  padding: 0.5rem;\n  border-right: 1px solid #E1E1E1;\n  border-bottom: 1px solid #E1E1E1;\n  text-align: center;\n}\n\ntable td:first-child {\n  border-left: 1px solid #E1E1E1;\n  text-align: left;\n}\n\n/**************************/\n\nfooter {\n  padding: 0.5em 0.5em 0.5em 0.5em;\n  text-align: center;\n  font-size: 90%;\n}\n\n/**************************/\n/* KM-SPECIFIC STYLE      */\n/**************************/\n\n.report {\n  margin-bottom: 1rem;\n}\n\n/**************************/\n\n.chapter {\n  border-bottom: solid 2px #cccccc;\n}\n\n/**************************/\n\n.question, .answer-item {\n  padding: 5px 10px 25px 10px;\n  border-left: 5px solid #ddd;\n}\n\n.question:last-child, .answer-item:last-child {\n  padding-bottom: 5px;\n}\n\n.answer-item > .followups > .question, .questions > .question {\n  border: none;\n  padding-left: 0;\n}\n\n.question > h4 {\n  margin-top: 0;\n  margin-bottom: 0.5rem;\n  font-size: 0.95rem;\n  font-weight: bold;\n}\n\n.question .title .human-identifier {\n  display: inline-block;\n  padding: 0.1rem 0.5rem;\n  margin-bottom: 0.25rem;\n  margin-right: 0.25rem;\n  border: 1px solid #999;\n  border-radius: 0.25rem;\n  color: #999;\n  font-size: 0.75rem;\n  vertical-align: middle;\n}\n\n.question .text {\n  margin-top: 0;\n  margin-bottom: 0.75rem;\n}\n\n.question > .extra-data {\n  margin-bottom: 0.75rem;\n}\n\n.question b {\n  font-weight: normal;\n}\n\n/**************************/\n\n.tags, .experts, .references {\n  color: #868e96;\n  line-height: 1.5;\n}\n\n.tags b, .experts b, .reference b,\n.tags i, .experts a, .reference a {\n  vertical-align: middle;\n}\n\n.tags svg, .experts svg, .references svg {\n  width: 13px;\n  height: 14px;\n  margin-right: 7px;\n  vertical-align: middle;\n  color: #495057;\n}\n\n.tag::after, .expert::after, .reference::after {\n  content: \",\";\n}\n\n.tag:last-of-type::after, .expert:last-of-type::after, .reference:last-of-type::after {\n  content: \" \";\n}\n\n/**************************/\n\n.answer-block .answer {\n  font-style: italic;\n}\n\n.answer-block .answer span {\n  vertical-align: middle;\n}\n\n.answer-block .answer svg,\n.no-answer svg {\n  height: 20px;\n  width: 20px;\n  margin-right: 0.3rem;\n  vertical-align: middle;\n}\n\n.answer-item > .answer:first-child {\n  margin-top: 0;\n  margin-bottom: 25px;\n}\n\n.no-answer {\n  font-weight: bold;\n}\n\n.no-answer span {\n  vertical-align: middle;\n}\n\n.question.required .no-answer {\n  color: #D0021B;\n}\n\n.question.optional .no-answer {\n  color: #9B9B9B;\n}\n\n.integration-link {\n  display: flex;\n  align-items: center;\n}\n\n.integration-link img {\n  max-height: 2rem;\n  margin-right: .5rem;\n}\n\n.metrics > p {\n  font-style: italic;\n  margin-top: 0;\n}\n"
        }
    ],
    "assets" : [],
    "createdAt" : "2020-07-03T07:01:44.074Z"
}
